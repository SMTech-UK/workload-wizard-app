## BUGS


## Testing checklist (manual)

- Lecturer assignment dialog
  - Opens and loads groups for selected iteration and lecturers for org
  - Computed hours preview matches module credits; override saves and persists
  - Allocation appears in table; Remove deletes and audit entry is written
  - Permission gating: orgadmin/manager can assign; lecturer-only user cannot

- Lecturer profiles UI
  - Create profile; appears in assignment list; edit and deactivate works
  - Permission gating enforced; audit entries on create/update/delete

- Course/module management
  - Edit/delete course and module with confirmations; uniqueness errors surface
  - Audits on create/update/delete; permissions enforced server and UI

- Iteration details page
  - Lists groups and allocations; create group; assign/remove lecturer
  - Respects selected academic year; switching AY updates lists

- Feature flags admin
  - Toggle writes via `/api/admin/flags/toggle` to Convex overrides
  - `getFlags()` reflects override for current user; audit `flags.updated` exists
  - Non-admin access is denied (redirects/403)

- Permission-aware UI states
  - As sysadmin/orgadmin: all actions enabled; as lecturer/viewer: actions disabled/hidden
  - Server still blocks forbidden actions (verify error surfaced as toast)

- Error handling
  - Simulate bad input/network; toasts show errors; no partial/dirty UI states remain

- Staff capacity UX
  - Bars update after allocations; thresholds show green/amber/red appropriately
  - Basic filter/sort (if present) updates the list correctly

- E2E smoke flow
  - Switch to published AY; create course and Year 1; create module and attach to year
  - Create iteration for selected AY; create a group; assign lecturer; verify in `/staff`
