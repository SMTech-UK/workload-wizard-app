---

# âœ… **Tomorrowâ€™s Task List: Core Foundations Sprint**

## ğŸ¯ **Goal by EOD**

> Have **role/permission management fully usable** by both sysadmin and orgadmin, with **auditing**, **UX polish**, and **proven enforcement**, so you can safely layer in workload logic (lecturers/modules) next.

---

## ğŸ› ï¸ 1. System Admin Enhancements

### ğŸ§  Role Assignment Interface

* [ ] Add **role assignment dropdown** to `/admin/users` table
* [ ] Add **bulk role assignment** (check/select multiple â†’ assign modal)
* [ ] Log audit entries:

  * [ ] `role.assigned`
  * [ ] `role.revoked`

### ğŸ›‚ User Management

* [ ] Add **"reset password"** button to each user row
* [ ] Add **filter/search** to user table (by name, email, org, status)
* [ ] Fix audit log links so you can click through to entity (if implemented)

---

## ğŸ§‘â€ğŸ« 2. Organisation Admin Tools

### ğŸ‘¥ Org User Management

* [ ] Show **user roles per user**
* [ ] Add **role update dropdown**
* [ ] Add audit logging on role change

### ğŸ§± Org Role Management

* [ ] Enable orgadmins to:

  * [ ] Create/edit/delete **their orgâ€™s roles**
  * [ ] Assign permissions to those roles
* [ ] Add restrictions so orgadmins **cannot affect global roles**
* [ ] Add label (ğŸ“ default / âœï¸ custom) next to each permission
* [ ] Show tooltips on each icon with explanation

---

## ğŸ” 3. Permission System Polish

* [ ] Add wrapper `requireOrgPermission("staff.create")` to enforce access
* [ ] Ensure sysadmin bypasses checks
* [ ] Add guardrails: sysadmin **cannot edit orgadmin roles**, and vice versa
* [ ] Audit:

  * [ ] `permission.assigned`
  * [ ] `permission.revoked`
  * [ ] `role.created`
  * [ ] `role.deleted`

---

## ğŸ§ª 4. Dev Tooling & Testing (Stretch but useful)

* [ ] `createTestUserWithRole()` util (for test seeds/dev UX)
* [ ] Seed command:

  * [ ] Creates org with default roles + permissions
  * [ ] Creates 3 users with different roles
* [ ] Optional: create `hasPermissionDevTest()` page that logs permission status for current user

---

## ğŸ“¦ 5. MVP Prep for Next Sprint

Start rough wireframes/code once above is done:

### ğŸ§‘â€ğŸ« Staff

* [ ] Schema: FT/PT/Bank, contract hours, max teaching hours
* [ ] Add input form + view
* [ ] Assign staff to academic year

### ğŸ“˜ Modules

* [ ] Schema: code, name, hours, academic year
* [ ] Input: create + view module
* [ ] Assign modules to staff with role (teaching/admin)

### ğŸ“Š Workload Engine (Start Planning)

* [ ] Calculate workload from allocations
* [ ] Staff dashboard: workload summary + bar chart
* [ ] Start MVP calendar/prototype with staff view

---

## ğŸ“ Optional (Stretch Goals)

* [ ] `/help` route with dummy onboarding / docs
* [ ] Add Clerk dev middleware that warns if missing `orgId` or `role`
* [ ] Auto-audit summary for each user (on profile page or modal)

---